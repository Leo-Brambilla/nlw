(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3527],{67935:function(e,t,n){"use strict";n.d(t,{n:function(){return I}});var r=n(85893),i=n(96486),o=n(67294),a=n(50768),u=n(85215),c=n(13708);n(83023),n(78984),n(85258),n(33108);function s(e,t){return"mux"===e?function(e){return{hls:"https://stream.mux.com/".concat(e,".m3u8"),poster:"https://image.mux.com/".concat(e,"/thumbnail.png?width=1280&height=720&fit_mode=pad")}}(t):"panda"===e?function(e){return{hls:"https://b-vz-762f4670-e04.tv.pandavideo.com.br/".concat(e,"/playlist.m3u8"),poster:"https://vz-762f4670-e04.b-cdn.net/".concat(e,"/thumbnail.jpg")}}(t):function(e){var t="https://alnilam.rocketseat.dev";return{hls:"".concat(t,"/outputs/").concat(e,"/master.m3u8"),poster:"".concat(t,"/outputs/").concat(e,"/poster-25_0.jpg"),thumbnailTrack:{url:"".concat(t,"/outputs/").concat(e,"/preview/thumb-track.vtt")}}}(t)}var l=n(73935),d=n(42663),f=n(50918),p=n(22030),g=(0,p.zo)("div",{display:"none",flexDirection:"column",background:"#323238",borderRadius:"5px",position:"relative",padding:"0 5px 5px",overflow:"hidden","+ div .resize-handle":{display:"none",background:"url(/assets/icons/player/resize.svg) no-repeat center #323238",width:"34px !important",height:"34px !important",right:"1px !important",bottom:"1px !important",borderRadius:"5px"},variants:{isVisible:{true:{display:"flex","+ div .resize-handle":{display:"block"}}}}}),h=(0,p.zo)("button",{position:"absolute",top:60,right:16,background:"url(/assets/icons/player/close.svg) no-repeat center #323238",width:34,height:34,borderRadius:9999,border:0,zIndex:2,fontSize:0}),v=(0,p.zo)("button",{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:8,height:44,padding:"0 8px",background:"none",border:0,color:"#E1E1E6",fontWeight:"bold",textTransform:"uppercase",fontSize:13,cursor:"move",i:{width:18,height:18,background:"url(/assets/icons/player/drag.svg) no-repeat center"}}),m=(0,p.zo)("div",{width:"100%",height:0,paddingBottom:"56.25%",position:"relative",video:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),b={width:350,height:240},y=function(e){return[{src:e.hls,type:"application/x-mpegURL"}]},x=(0,o.forwardRef)((function(e,t){var n=e.targetVideoRef,a=e.videoId,c=e.visible,p=e.onClose,x=(0,o.useRef)(null),k=(0,o.useState)({x:0,y:0}),C=k[0],R=k[1],w=(0,o.useState)(b),S=w[0],E=w[1],I=(0,f.a)("(max-width: 768px)"),z=s("panda",a),j=(0,o.useCallback)((function(){var e=n.current;if(e){var t=e.getBoundingClientRect();if(I){var r={width:Math.min(b.width,t.width),height:Math.min(b.height,t.height+44)};E(r),R({x:30+t.width/2-r.width/2,y:t.top-r.height-20})}else E(b),R({x:t.right+28,y:t.bottom-b.height})}}),[I,n]);return(0,o.useEffect)((function(){var e=x.current,r=null===n||void 0===n?void 0:n.current;if(e&&r&&a&&c)if(t.current){var i=t.current;i.currentVideoId!==a&&(i.src(y(z)),i.currentTime(r.currentTime),i.currentVideoId=a)}else{var o=(0,u.default)(e,{autoplay:!0,controls:!1,muted:!0,responsive:!0,fluid:!0,sources:y(z)});t.current=o,o.currentTime(r.currentTime),o.currentVideoId=a}}),[t,n,z,a,c]),(0,o.useEffect)((function(){c&&j()}),[c,j]),(0,o.useEffect)((function(){var e=(0,i.debounce)(j,500);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[j]),(0,l.createPortal)((0,r.jsx)(d.s,{position:C,size:S,onDragStop:function(e,t){return R({x:t.x,y:t.y})},onResizeStop:function(e,t,n,r,i){R(i),E({width:n.offsetWidth,height:n.offsetHeight})},default:{width:350,height:240,x:0,y:0},lockAspectRatio:16/9,lockAspectRatioExtraHeight:44,maxWidth:600,minWidth:150,bounds:"window",dragHandleClassName:"drag-handle",resizeHandleClasses:{bottomRight:"resize-handle"},enableResizing:{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!0,bottomLeft:!1,topLeft:!1},style:{zIndex:10,pointerEvents:c?"all":"none"},children:(0,r.jsxs)(g,{isVisible:c&&!!a,children:[(0,r.jsx)(h,{onClick:p,children:"Close"}),(0,r.jsxs)(v,{className:"drag-handle",children:[(0,r.jsx)("i",{}),"Mover"]}),(0,r.jsx)(m,{children:(0,r.jsx)("video",{ref:x})})]})}),document.getElementById("draggable"))}));x.displayName="SignalLanguagePopup";var k=(0,p.zo)("div",{".signal-language-btn":{background:"url(/assets/icons/player/signal-language.svg) no-repeat center",backgroundSize:"16px auto"},".audio-description-btn":{background:"url(/assets/icons/player/audio-description.svg) no-repeat center",backgroundSize:"24px auto"},".vjs-icon-cog:before":{fontSize:"15px"},variants:{signalLanguageVideoVisible:{true:{".signal-language-btn":{filter:"brightness(0.5) sepia(1) hue-rotate(-148deg) saturate(5)"}}},audioDescriptionVideoEnabled:{true:{".audio-description-btn":{filter:"brightness(0.5) sepia(1) hue-rotate(-148deg) saturate(5)"}}}}});function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){return[{src:e.hls,type:"application/x-mpegURL"}]},w="@Skylab:playerSpeed",S="@Skylab:playerQuality",E=[.5,1,1.5,2],I=(0,o.forwardRef)((function(e,t){var n=e.autoplay,l=e.platform,d=e.journey,f=e.product,p=e.videoId,g=e.lessonId,h=e.signalLanguageVideoId,v=e.audioDescriptionVideoId,m=e.onReady,b=e.onPlay,y=e.onPause,I=e.onTimeUpdate,z=e.onEnd,j=e.startTime,T=e.watchTimeIntervalSeconds,B=void 0===T?20:T,L=e.onWatchTime,V=e.hasCaption,P=void 0!==V&&V,_=(0,o.useState)(!1),D=_[0],O=_[1],A=(0,o.useState)(!1),N=A[0],M=A[1],W=N?v:p,H=(0,o.useRef)(null),U=(0,o.useRef)(null),Z=(0,o.useRef)(null),q=(0,o.useRef)(null),Q=(0,o.useRef)((0,a.Z)()),F=(0,o.useRef)((0,a.Z)()),G=s(l,W),J=function(){F.current=(0,a.Z)()},K=(0,o.useCallback)((function(e,n){var r=void 0===n?{}:n,i=r.bypassPlayingCheck,o=void 0!==i&&i,a=r.speed,u=t.current,c=!1;if(u&&(o||!(null===u||void 0===u?void 0:u.paused()))){"discover"===f&&(c=!0);var s={id:F.current,session_id:Q.current,video_id:W,current_time:Math.round(e),speed:a||u.playbackRate(),journey:d||"expertsclub",product:f||"expertsclub",freemium:c};L&&L(s)}}),[L,t,W,d,f]),X=(0,o.useCallback)((0,i.throttle)(K,1e3*B,{trailing:!1}),[K,B]),Y=(0,o.useCallback)((0,i.debounce)((function(e,t){K(e,{bypassPlayingCheck:!0}),J(),K(t,{bypassPlayingCheck:!0})}),1e3),[K]),$=(0,o.useCallback)((function(e,t){K(e,{bypassPlayingCheck:!0,speed:t}),J(),K(e)}),[K]),ee=function(){O((function(e){return!e}))},te=(0,o.useCallback)((function(){var e=t.current,n=e.paused();M((function(e){return!e})),e.autoplay(!n)}),[t]);return(0,o.useEffect)((function(){var e=H.current;if(e){if(t.current){var r=t.current;r.isClientReady=!1,r.src(R(G)),r.poster(G.poster)}else{u.default.addLanguage("ptBR",c);var i=(0,u.default)(e,{autoplay:n,controls:!0,responsive:!0,fluid:!0,playbackRates:E,sources:R(G),poster:G.poster,language:"ptBR",controlBar:{volumePanel:{inline:!1}}},(function(){var e=this,t=this;this.isClientReady=!1,this.httpSourceSelector(),this.hotkeys({seekStep:10});var n=this.qualityLevels();n.on("change",(function(){e.isClientReady&&localStorage.setItem(S,n[n.selectedIndex].height||null)}));var r=+localStorage.getItem(w)||1;this.on("ratechange",(function(){var e=t.playbackRate();+localStorage.getItem(w)===e||0===t.currentTime()||($(t.currentTime(),r),t.isClientReady&&localStorage.setItem(w,"".concat(e)),r=e)}))}));t.current=i}J()}}),[H,W]),(0,o.useEffect)((function(){var e=t.current;g&&P&&e.ready((function(){var t;e.addRemoteTextTrack({src:(t=g,"".concat("https://skylab-api.rocketseat.com.br","/lesson/captions/").concat(t)),kind:"captions",srcLang:"pt-BR",label:"Portugu\xeas"},!1)}))}),[t,g,P]),(0,o.useEffect)((function(){var e=t.current;return function(){e&&(e.dispose(),t.current=null)}}),[t]),(0,o.useEffect)((function(){var e=t.current;if(v){if(q.current)return;var n=u.default.extend(u.default.getComponent("Button"));u.default.registerComponent("ADButton",n);var r=e.controlBar.addChild("ADButton",{},9);r.controlText("Audiodescri\xe7\xe3o"),r.addClass("audio-description-btn"),r.handleClick=te,q.current=!0}else e.controlBar.removeChild("ADButton"),M(!1),q.current=!1}),[t,W,v,te]),(0,o.useEffect)((function(){var e=t.current;if(h){if(Z.current)return;var n=u.default.extend(u.default.getComponent("Button"));u.default.registerComponent("SLButton",n);var r=e.controlBar.addChild("SLButton",{},10);r.controlText("LIBRAS"),r.addClass("signal-language-btn"),r.handleClick=ee,Z.current=!0}else e.controlBar.removeChild("SLButton"),O(!1),Z.current=!1}),[t,W,h]),(0,o.useEffect)((function(){var e=t.current,n=U.current;if(e&&n){var r=function(){return n.play()},i=function(){return n.pause()},o=function(){n.currentTime(e.currentTime()),n.pause()},a=function(){return n.play()},u=function(){n.currentTime(e.currentTime()),n.play()};return e.on("play",r),e.on("pause",i),e.on("waiting",o),e.on("playing",a),n.on("playing",u),function(){e.off("play",r),e.off("pause",i),e.off("waiting",o),e.off("playing",a),n.off("playing",u)}}}),[t,U,D,h]),(0,o.useEffect)((function(){var e=t.current;e&&e.autoplay(n)}),[t,n]),(0,o.useEffect)((function(){var e=t.current,n=function(){m&&m(e.duration()),j&&e.currentTime(j),function(e){var t=e.qualityLevels(),n=localStorage.getItem(S),r=t.levels_.findIndex((function(e){return e.height===+n}));-1!==r&&(t.levels_.forEach((function(e,t){e.enabled=r===t})),t.selectedIndex_=r,t.trigger({type:"change",selectedIndex:r}))}(e);var t=function(e){var t=localStorage.getItem(w);if(t&&E.includes(+t))return e.playbackRate(+t),+t}(e);K(j||0,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}({bypassPlayingCheck:!0},t&&{speed:t})),e.isClientReady=!0};return e.on("loadedmetadata",n),function(){e.off("loadedmetadata",n)}}),[t,m,j,K]),(0,o.useEffect)((function(){var e,n=t.current,r=function(){var t=n.currentTime();e&&Math.abs(t-e)>1?Y(e,t):X(t),e=t,I&&I({time:n.currentTime()})};return n.on("timeupdate",r),function(){n.off("timeupdate",r)}}),[t,I,Y,X]),(0,o.useEffect)((function(){var e=t.current,n=function(){b&&b()};return e.on("play",n),function(){e.off("play",n)}}),[t,b,K]),(0,o.useEffect)((function(){var e=t.current,n=function(){y&&y()};return e.on("pause",n),function(){e.off("pause",n)}}),[t,y]),(0,o.useEffect)((function(){var e=t.current,n=function(){return z&&z()};return e.on("ended",n),function(){e.off("ended",n)}}),[t,z]),(0,r.jsxs)(k,{audioDescriptionVideoEnabled:N,signalLanguageVideoVisible:D,children:[(0,r.jsx)("video",{ref:H,className:"video-js vjs-big-play-centered"}),(0,r.jsx)(x,{ref:U,targetVideoRef:H,videoId:h,visible:D,onClose:function(){return O(!1)}})]})}));I.displayName="Video"},25893:function(){}}]);